<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <title>Î‘Î½Î±Ï†Î¿ÏÎ¬ Î ÎµÎ»Î¬Ï„Î·</title>
  <link rel="icon" href="data:,">
  <style>
    body { 
      font-family: sans-serif; 
      padding: 2rem; 
      background-color: #f5f5f5;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background-color: white;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    select, button { 
      font-size: 16px; 
      padding: 0.5rem; 
      margin: 0.5rem;
    }
    button {
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin: 0 5px;
    }
    button:hover {
      background-color: #0056b3;
    }
    #voiceBtn {
      background-color: #28a745;
    }
    #voiceBtn:hover {
      background-color: #1e7e34;
    }
    #voiceBtn.listening {
      background-color: #dc3545;
      animation: pulse 1s infinite;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    .client-info {
      background-color: #f8f9fa;
      padding: 1.5rem;
      border-radius: 6px;
      margin: 1rem 0;
      border-left: 4px solid #007bff;
    }
    .info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1rem;
      margin-bottom: 1rem;
    }
    .info-item {
      background-color: white;
      padding: 1rem;
      border-radius: 4px;
      border: 1px solid #dee2e6;
    }
    .info-label {
      font-weight: bold;
      color: #495057;
      display: block;
      margin-bottom: 0.5rem;
    }
    .info-value {
      font-size: 1.1em;
      color: #212529;
    }
    .highlight {
      background-color: #fff3cd;
      border-color: #ffeaa7;
    }
    .collectible {
      background-color: #d1ecf1;
      border-color: #bee5eb;
    }
    .collectible .info-value {
      font-weight: bold;
      color: #0c5460;
    }
    .metax-item {
      background-color: #e7f3ff;
      border-color: #b3d9ff;
    }
    .metax-item .info-value {
      font-weight: bold;
      color: #0056b3;
    }
    table { 
      border-collapse: collapse; 
      margin-top: 1rem; 
      width: 100%;
      background-color: white;
    }
    th, td { 
      border: 1px solid #dee2e6; 
      padding: 8px; 
      text-align: center; 
    }
    th { 
      background-color: #e9ecef;
      font-weight: bold;
      color: #495057;
    }
    .total-row {
      background-color: #f8f9fa;
      font-weight: bold;
    }
    h2 {
      color: #343a40;
      text-align: center;
      margin-bottom: 2rem;
    }
    h3 {
      color: #495057;
      border-bottom: 2px solid #007bff;
      padding-bottom: 0.5rem;
    }
    h4 {
      color: #6c757d;
      margin-top: 2rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>ğŸ“Š Î‘Î½Î±Ï†Î¿ÏÎ¬ Î ÎµÎ»Î¬Ï„Î·</h2>
    
    <div style="text-align: center; margin-bottom: 2rem;">
      <select id="clientSelect" style="min-width: 300px;">
        <option value="">-- Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Î ÎµÎ»Î¬Ï„Î· --</option>
        {% for name in clients %}
        <option value="{{ name }}">{{ name }}</option>
        {% endfor %}
      </select>
      <button onclick="fetchClient()">ğŸ” Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·</button>
      <button id="voiceBtn" onclick="startVoiceSearch()">ğŸ¤ Î¦Ï‰Î½Î·Ï„Î¹ÎºÎ® Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·</button>
      <div id="voiceStatus" style="margin-top: 1rem; font-style: italic; color: #6c757d;"></div>
    </div>

    <div id="result"></div>
  </div>

  <script>
    // Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Î±Î½Ï„Î¹ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… Web Speech API
    let recognition;
    let isListening = false;

    // Î›Î¯ÏƒÏ„Î± Ï€ÎµÎ»Î±Ï„ÏÎ½ Î³Î¹Î± Î±Î½Î±Î¶Î®Ï„Î·ÏƒÎ·
    let clientsList = [];

    // Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î»Î¯ÏƒÏ„Î±Ï‚ Ï€ÎµÎ»Î±Ï„ÏÎ½
    async function loadClientsList() {
      try {
        console.log('Attempting to fetch clients list...');
        const response = await fetch('/clients-list');
        console.log('Response status:', response.status);
        
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        clientsList = await response.json();
        console.log('Clients loaded:', clientsList.length);
      } catch (error) {
        console.error('Error loading clients list:', error);
        // Fallback - Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Î»Î¯ÏƒÏ„Î±Ï‚ Î±Ï€ÏŒ Ï„Î¿ dropdown
        const selectElement = document.getElementById('clientSelect');
        clientsList = [];
        
        console.log('Total options in dropdown:', selectElement.options.length);
        
        for (let i = 0; i < selectElement.options.length; i++) {
          const option = selectElement.options[i];
          console.log(`Option ${i}: value="${option.value}", text="${option.text}"`);
          
          // Î Î±ÏÎ¬Î»ÎµÎ¹ÏˆÎ· Ï„Î·Ï‚ Ï€ÏÏÏ„Î·Ï‚ ÎµÏ€Î¹Î»Î¿Î³Î®Ï‚ Î±Î½ ÎµÎ¯Î½Î±Î¹ ÎºÎµÎ½Î® Î® placeholder
          if (option.value && option.value.trim() !== '') {
            clientsList.push(option.value);
          }
        }
        
        console.log('Using fallback clients list:', clientsList.length);
        console.log('Clients array:', clientsList);
      }
    }

    // Î‘ÏÏ‡Î¹ÎºÎ¿Ï€Î¿Î¯Î·ÏƒÎ· Speech Recognition
    function initSpeechRecognition() {
      if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
        recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.lang = 'el-GR'; // Î•Î»Î»Î·Î½Î¹ÎºÎ¬
        recognition.continuous = false;
        recognition.interimResults = false;
        recognition.maxAlternatives = 5;

        recognition.onstart = function() {
          console.log('Speech recognition started');
          document.getElementById('voiceStatus').innerText = 'ğŸ¤ Î‘ÎºÎ¿ÏÏ‰... Î ÎµÎ¯Ï„Îµ Ï„Î¿ ÏŒÎ½Î¿Î¼Î± Ï„Î¿Ï… Ï€ÎµÎ»Î¬Ï„Î·';
          document.getElementById('voiceBtn').classList.add('listening');
          document.getElementById('voiceBtn').innerText = 'ğŸ”´ Î‘ÎºÏÏŒÎ±ÏƒÎ·...';
          isListening = true;
        };

        recognition.onresult = function(event) {
          const spokenText = event.results[0][0].transcript.toLowerCase();
          console.log('Recognized:', spokenText);
          
          document.getElementById('voiceStatus').innerText = `ğŸ“ Î†ÎºÎ¿Ï…ÏƒÎ±: "${spokenText}"`;
          
          // Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Ï„Î¿Ï… Ï€Î¹Î¿ ÎºÎ¿Î½Ï„Î¹Î½Î¿Ï Ï€ÎµÎ»Î¬Ï„Î·
          const matchedClient = findBestMatch(spokenText);
          
          if (matchedClient) {
            document.getElementById('clientSelect').value = matchedClient;
            document.getElementById('voiceStatus').innerText = `âœ… Î’ÏÎ­Î¸Î·ÎºÎµ: ${matchedClient}`;
            
            // Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· Î±Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Î¼ÎµÏ„Î¬ Î±Ï€ÏŒ 1 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î¿
            setTimeout(() => {
              fetchClient();
            }, 1000);
          } else {
            document.getElementById('voiceStatus').innerText = `âŒ Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ Ï€ÎµÎ»Î¬Ï„Î·Ï‚ Ï€Î¿Ï… Î½Î± Ï„Î±Î¹ÏÎ¹Î¬Î¶ÎµÎ¹ Î¼Îµ: "${spokenText}"`;
          }
        };

        recognition.onerror = function(event) {
          console.error('Speech recognition error:', event.error);
          let errorMsg = 'Î£Ï†Î¬Î»Î¼Î± Î±Î½Î±Î³Î½ÏÏÎ¹ÏƒÎ·Ï‚ Ï†Ï‰Î½Î®Ï‚';
          
          switch(event.error) {
            case 'network':
              errorMsg = 'ğŸŒ Î ÏÏŒÎ²Î»Î·Î¼Î± Î´Î¹ÎºÏ„ÏÎ¿Ï…';
              break;
            case 'not-allowed':
              errorMsg = 'ğŸš« Î”ÎµÎ½ ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÏ„Î±Î¹ Î· Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÏ„Î¿ Î¼Î¹ÎºÏÏŒÏ†Ï‰Î½Î¿';
              break;
            case 'no-speech':
              errorMsg = 'ğŸ”‡ Î”ÎµÎ½ Î±Î½Î¹Ï‡Î½ÎµÏÏ„Î·ÎºÎµ Î¿Î¼Î¹Î»Î¯Î±';
              break;
            default:
              errorMsg = `âŒ Î£Ï†Î¬Î»Î¼Î±: ${event.error}`;
          }
          
          document.getElementById('voiceStatus').innerText = errorMsg;
          resetVoiceButton();
        };

        recognition.onend = function() {
          console.log('Speech recognition ended');
          resetVoiceButton();
        };

        return true;
      } else {
        document.getElementById('voiceStatus').innerText = 'âŒ ÎŸ Ï€ÎµÏÎ¹Î·Î³Î·Ï„Î®Ï‚ Î´ÎµÎ½ Ï…Ï€Î¿ÏƒÏ„Î·ÏÎ¯Î¶ÎµÎ¹ Ï†Ï‰Î½Î·Ï„Î¹ÎºÎ® Î±Î½Î±Î³Î½ÏÏÎ¹ÏƒÎ·';
        document.getElementById('voiceBtn').disabled = true;
        return false;
      }
    }

    // Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬ ÎºÎ¿Ï…Î¼Ï€Î¹Î¿Ï Ï†Ï‰Î½Î®Ï‚
    function resetVoiceButton() {
      document.getElementById('voiceBtn').classList.remove('listening');
      document.getElementById('voiceBtn').innerText = 'ğŸ¤ Î¦Ï‰Î½Î·Ï„Î¹ÎºÎ® Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·';
      isListening = false;
    }

    // Î•ÏÏÎµÏƒÎ· ÎºÎ±Î»ÏÏ„ÎµÏÎ¿Ï… Ï„Î±Î¹ÏÎ¹Î¬ÏƒÎ¼Î±Ï„Î¿Ï‚
    function findBestMatch(spokenText) {
      let bestMatch = null;
      let bestScore = 0;

      for (const client of clientsList) {
        const score = calculateSimilarity(spokenText, client.toLowerCase());
        if (score > bestScore && score > 0.3) { // ÎšÎ±Ï„ÏÏ†Î»Î¹ Î¿Î¼Î¿Î¹ÏŒÏ„Î·Ï„Î±Ï‚
          bestScore = score;
          bestMatch = client;
        }
      }

      return bestMatch;
    }

    // Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Î¿Î¼Î¿Î¹ÏŒÏ„Î·Ï„Î±Ï‚ Î¼ÎµÏ„Î±Î¾Ï Î´ÏÎ¿ ÎºÎµÎ¹Î¼Î­Î½Ï‰Î½
    function calculateSimilarity(text1, text2) {
      // ÎšÎ±Î½Î¿Î½Î¹ÎºÎ¿Ï€Î¿Î¯Î·ÏƒÎ· ÎºÎµÎ¹Î¼Î­Î½Ï‰Î½
      text1 = normalizeGreekText(text1);
      text2 = normalizeGreekText(text2);

      // ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Î±Î½ Ï„Î¿ ÎºÎµÎ¯Î¼ÎµÎ½Î¿ Ï€ÎµÏÎ¹Î­Ï‡ÎµÏ„Î±Î¹ ÏƒÏ„Î¿ ÏŒÎ½Î¿Î¼Î± Ï€ÎµÎ»Î¬Ï„Î·
      if (text2.includes(text1) || text1.includes(text2)) {
        return 0.8;
      }

      // Î”Î¹Î±Î¯ÏÎµÏƒÎ· ÏƒÎµ Î»Î­Î¾ÎµÎ¹Ï‚ ÎºÎ±Î¹ Î­Î»ÎµÎ³Ï‡Î¿Ï‚ ÎºÎ¿Î¹Î½ÏÎ½ Î»Î­Î¾ÎµÏ‰Î½
      const words1 = text1.split(/\s+/);
      const words2 = text2.split(/\s+/);
      
      let matchingWords = 0;
      for (const word1 of words1) {
        if (word1.length > 2) { // Î‘Î³Î½ÏŒÎ·ÏƒÎ· Ï€Î¿Î»Ï Î¼Î¹ÎºÏÏÎ½ Î»Î­Î¾ÎµÏ‰Î½
          for (const word2 of words2) {
            if (word2.includes(word1) || word1.includes(word2)) {
              matchingWords++;
              break;
            }
          }
        }
      }

      return matchingWords / Math.max(words1.length, words2.length);
    }

    // ÎšÎ±Î½Î¿Î½Î¹ÎºÎ¿Ï€Î¿Î¯Î·ÏƒÎ· ÎµÎ»Î»Î·Î½Î¹ÎºÎ¿Ï ÎºÎµÎ¹Î¼Î­Î½Î¿Ï…
    function normalizeGreekText(text) {
      return text
        .toLowerCase()
        .replace(/Î¬/g, 'Î±').replace(/Î­/g, 'Îµ').replace(/Î®/g, 'Î·')
        .replace(/Î¯/g, 'Î¹').replace(/ÏŒ/g, 'Î¿').replace(/Ï/g, 'Ï…')
        .replace(/Ï/g, 'Ï‰').replace(/Î/g, 'Î¹').replace(/Î°/g, 'Ï…')
        .replace(/[^\u0370-\u03FF\u1F00-\u1FFF\s]/g, ''); // ÎšÏÎ¬Ï„Î·ÏƒÎ· Î¼ÏŒÎ½Î¿ ÎµÎ»Î»Î·Î½Î¹ÎºÏÎ½ Ï‡Î±ÏÎ±ÎºÏ„Î®ÏÏ‰Î½
    }

    // ÎˆÎ½Î±ÏÎ¾Î· Ï†Ï‰Î½Î·Ï„Î¹ÎºÎ®Ï‚ Î±Î½Î±Î¶Î®Ï„Î·ÏƒÎ·Ï‚
    function startVoiceSearch() {
      if (clientsList.length === 0) {
        document.getElementById('voiceStatus').innerText = 'â³ Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î»Î¯ÏƒÏ„Î±Ï‚ Ï€ÎµÎ»Î±Ï„ÏÎ½...';
        return;
      }

      if (!recognition) {
        if (!initSpeechRecognition()) {
          return;
        }
      }

      if (isListening) {
        recognition.stop();
        return;
      }

      try {
        recognition.start();
      } catch (error) {
        console.error('Error starting recognition:', error);
        document.getElementById('voiceStatus').innerText = 'âŒ Î£Ï†Î¬Î»Î¼Î± Î­Î½Î±ÏÎ¾Î·Ï‚ Î±Î½Î±Î³Î½ÏÏÎ¹ÏƒÎ·Ï‚ Ï†Ï‰Î½Î®Ï‚';
      }
    }

    // Î‘ÏÏ‡Î¹ÎºÎ¿Ï€Î¿Î¯Î·ÏƒÎ· ÎºÎ±Ï„Î¬ Ï„Î· Ï†ÏŒÏÏ„Ï‰ÏƒÎ· Ï„Î·Ï‚ ÏƒÎµÎ»Î¯Î´Î±Ï‚
    window.onload = async function() {
      await loadClientsList();
      initSpeechRecognition();
    };

    // ÎšÏÏÎ¹Î± ÏƒÏ…Î½Î¬ÏÏ„Î·ÏƒÎ· Î±Î½Î±Î¶Î®Ï„Î·ÏƒÎ·Ï‚ Ï€ÎµÎ»Î¬Ï„Î·
    function fetchClient() {
      const name = document.getElementById('clientSelect').value;
      if (!name) return alert('Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Ï€ÎµÎ»Î¬Ï„Î·');

      fetch(`/client?name=${encodeURIComponent(name)}`)
        .then(res => res.json())
        .then(data => {
          if (data.error) return alert(data.error);

          const months = data['ÎœÎ®Î½ÎµÏ‚'] || [];
          const turnover = data['ÎœÎ·Î½Î¹Î±Î¯Î¿Ï‚ Î¤Î¶Î¯ÏÎ¿Ï‚'] || {};
          const materials = data['Î¥Î»Î¹ÎºÎ¬'] || [];

          // Î ÏÎ¿ÏƒÎ´Î¹Î¿ÏÎ¹ÏƒÎ¼ÏŒÏ‚ ÎºÎ»Î¬ÏƒÎ·Ï‚ CSS Î³Î¹Î± Ï„Î¿ ÎµÎ¹ÏƒÏ€ÏÎ±ÎºÏ„Î­Î¿ Ï€Î¿ÏƒÏŒ
          const collectibleAmount = data['Î•Î¹ÏƒÏ€ÏÎ±ÎºÏ„Î­Î¿ Î Î¿ÏƒÏŒ'];
          const collectibleClass = (collectibleAmount > 0) ? 'collectible' : '';

          // Î ÏÎ¿ÏƒÎ´Î¹Î¿ÏÎ¹ÏƒÎ¼ÏŒÏ‚ ÎºÎ»Î¬ÏƒÎ·Ï‚ CSS Î³Î¹Î± Ï„Î¿ ÎœÎµÏ„Î±Ï‡
          const metaxValue = data['ÎœÎµÏ„Î±Ï‡'];
          const metaxClass = (metaxValue !== 0 && metaxValue !== '-') ? 'metax-item' : '';

          let html = `
            <div class="client-info">
              <h3>ğŸ“‹ Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î± Î ÎµÎ»Î¬Ï„Î·</h3>
              <div class="info-grid">
                <div class="info-item">
                  <span class="info-label">ğŸ‘¤ ÎŒÎ½Î¿Î¼Î±:</span>
                  <span class="info-value">${data['ÎŸÎ½Î¿Î¼Î± 1']}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">ğŸ’³ Î Î»Î·ÏÏ‰Ï„Î®Ï‚:</span>
                  <span class="info-value">${data['Î Î»Î·ÏÏ‰Ï„Î®Ï‚']}</span>
                </div>
                <div class="info-item ${metaxClass}">
                  <span class="info-label">ğŸ“Š ÎœÎµÏ„Î±Ï‡:</span>
                  <span class="info-value">${typeof metaxValue === 'number' ? metaxValue.toFixed(2) + 'â‚¬' : metaxValue}</span>
                </div>
                <div class="info-item highlight">
                  <span class="info-label">ğŸ’° Î¤ÏÎ­Ï‡Î¿Î½ Î¥Ï€ÏŒÎ»Î¿Î¹Ï€Î¿:</span>
                  <span class="info-value">${typeof data['Î¤ÏÎ­Ï‡Î¿Î½ Î¥Ï€ÏŒÎ»Î¿Î¹Ï€Î¿'] === 'number' ? data['Î¤ÏÎ­Ï‡Î¿Î½ Î¥Ï€ÏŒÎ»Î¿Î¹Ï€Î¿'].toFixed(2) + 'â‚¬' : data['Î¤ÏÎ­Ï‡Î¿Î½ Î¥Ï€ÏŒÎ»Î¿Î¹Ï€Î¿']}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">ğŸ“… Î—Î¼Î­ÏÎµÏ‚ Î Î¯ÏƒÏ„Ï‰ÏƒÎ·Ï‚:</span>
                  <span class="info-value">${data['Î—Î¼Î­ÏÎµÏ‚ Î Î¯ÏƒÏ„Ï‰ÏƒÎ·Ï‚']}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">ğŸ“‹ Î—Î¼Î­ÏÎµÏ‚ Î’Î¬ÏƒÎ· Î£Ï…Î¼Ï†Ï‰Î½Î¯Î±Ï‚:</span>
                  <span class="info-value">${data['Î—Î¼Î­ÏÎµÏ‚ Î’Î¬ÏƒÎ· Î£Ï…Î¼Ï†Ï‰Î½Î¯Î±Ï‚']}</span>
                </div>
                <div class="info-item ${collectibleClass}">
                  <span class="info-label">ğŸ¯ Î•Î¹ÏƒÏ€ÏÎ±ÎºÏ„Î­Î¿ Î Î¿ÏƒÏŒ:</span>
                  <span class="info-value">${typeof collectibleAmount === 'number' ? collectibleAmount.toFixed(2) + 'â‚¬' : collectibleAmount}</span>
                </div>
              </div>
            </div>

            <h4>ğŸ“ˆ Î¤Î¶Î¯ÏÎ¿Ï‚ & Î§ÏÎ®ÏƒÎ· Î¥Î»Î¹ÎºÏÎ½</h4>
            <table>
              <tr>
                <th>Î¥Î»Î¹ÎºÏŒ</th>
                <th>Î¤Î¹Î¼Î®/ÏƒÏ…ÏƒÎº.(â‚¬)</th>
                ${months.map(m => `<th>${m}</th>`).join('')}
              </tr>
              <tr class="total-row">
                <td><strong>ğŸ’¼ Î£ÏÎ½Î¿Î»Î¿ Î¤Î¶Î¯ÏÎ¿Ï…</strong></td>
                <td>â€“</td>
                ${months.map(m => `<td><strong>${(turnover[m] || 0).toFixed(2)}â‚¬</strong></td>`).join('')}
              </tr>`;

          for (const mat of materials) {
            html += `
              <tr>
                <td style="text-align: left;">${mat['Î¥Î»Î¹ÎºÏŒ']}</td>
                <td>${mat['Î¤Î¹Î¼Î® Î±Î½Î¬ ÏƒÏ…ÏƒÎºÎµÏ…Î±ÏƒÎ¯Î±']?.toFixed(2) || '-'}â‚¬</td>
                ${months.map(m => `<td>${(mat[m] || 0).toFixed(2)}</td>`).join('')}
              </tr>`;
          }

          html += '</table>';
          document.getElementById('result').innerHTML = html;

          // ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Î¼Î·Î½ÏÎ¼Î±Ï„Î¿Ï‚ Ï†Ï‰Î½Î·Ï„Î¹ÎºÎ®Ï‚ Î±Î½Î±Î¶Î®Ï„Î·ÏƒÎ·Ï‚ Î¼ÎµÏ„Î¬ Î±Ï€ÏŒ ÎµÏ€Î¹Ï„Ï…Ï‡Î·Î¼Î­Î½Î· Î±Î½Î±Î¶Î®Ï„Î·ÏƒÎ·
          setTimeout(() => {
            document.getElementById('voiceStatus').innerText = '';
          }, 3000);
        })
        .catch(err => {
          console.error('Error:', err);
          alert('Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î·Î½ Î±Î½Î¬ÎºÏ„Î·ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½');
        });
    }
  </script>
</body>
</html>